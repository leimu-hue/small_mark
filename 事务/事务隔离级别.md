# 操作不一致的类型：

### 1、丢失更新

​	两个事务同时对一行进行操作，导致一个事务对一行数据的更新覆盖了另一个事务对其的更新

### 2、脏读

​	一个事务读取到了另一个事务还未提交更改的数据

### 3、不可重复读

​	一个事务对同一行同时读取两次，读取出来的数据都是不一致的

​	包括下面两种情况：

​		1）虚读：事务1读取某一个数据后，事务2对其进行了更改，当事务1再次读取数据时得到了不同的值

​		2）幻读：事务在操作过程中两次查询，第二次查询的结果包含了第一次查询结果中未出现的数据或者缺少第一个查询中出现的数据

# 事务隔离级别

1、SQL将事务隔离级别分为四个：

读未提交：如果一个事务开始写数据，不允许其他事务进行写操作，但是可以允许其他事务进行读取数据【可以解决丢失更新，但是不能解决脏读】【可以读取到还未提交事务的数据】

读写提交：如果一个事务开始写数据，不允许其他事务进行访问。但是如果进行读事务，就允许其他事务进行访问【可以解决丢失更新、脏读】【读取不到还没有提交事务的数据】

可重复读：如果一个事务开始写数据，不允许其他事务进行操作。而开始读事务，就不允许其他进行写事务【解决丢失更新、脏读、不可重读】

序列化：事务只能一个一个执行，不可以重叠执行【并发执行】。

注意：隔离级别越高，就会导致性能越低

# 【Spring】传播行为：

### 1、意思：

​	指的是方法之前调用事务的策略问题

### 2、级别：

1、REQUIRED：方法调用时不存在事务，就会创建，否则就沿用

2、SUPPORTS：方法调用时，不存在事务，就不开启，否则就沿用

3、MANDATORY：方法必须在事务内运行。不存在事务就会报错

4、REQUIRES_NEW：无论是否存在，都会开启新事务

5、NOW_SUPPORTED：不支持事务，如果已经有事务，那么就会挂起，等到方法结束后才会恢复事务

6、NEVER：不支持事务，如果存在事务就会报错

7、NESTED：嵌套事务。如果调用的方法抛出异常只会回滚内部SQL，不回滚主方法的【使用这个需要数据库支持保存点（savepoint），如果不支持，就会去使用REQUIRES_NEW】

